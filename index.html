<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.8.dev">
<title>ECSE 321 Introduction to Software Engineering: Tutorial</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>ECSE 321 Introduction to Software Engineering: Tutorial</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#trueproject-management-tools-and-development-toolchain">1. Project Management Tools and Development Toolchain</a>
<ul class="sectlevel2">
<li><a href="#truegit">1.1. Git</a></li>
<li><a href="#truegradle-a-build-framework-and-brief-example">1.2. Gradle: A Build Framework and Brief Example</a></li>
<li><a href="#truespring-boot-projects-and-github-project-management">1.3. Spring Boot Projects and GitHub Project Management</a>
<ul class="sectlevel3">
<li><a href="#truespring-boot-project-initialization">1.3.1. Spring Boot Project Initialization</a></li>
<li><a href="#trueapplication-project-setup">1.3.2. Application Project Setup</a></li>
<li><a href="#truegithub-project-repository">1.3.3. GitHub Project Repository</a></li>
</ul>
</li>
<li><a href="#truegithub-actions-for-continuous-integration">1.4. GitHub Actions for Continuous Integration</a>
<ul class="sectlevel3">
<li><a href="#truesetup-ci-workflow-and-template">1.4.1. Setup CI Workflow and Template</a></li>
</ul>
</li>
<li><a href="#trueheroku">1.5. Heroku</a>
<ul class="sectlevel3">
<li><a href="#truepreparations">1.5.1. Preparations</a></li>
<li><a href="#truecreating-a-heroku-app">1.5.2. Creating a Heroku app</a></li>
<li><a href="#trueadding-a-database-to-the-application">1.5.3. Adding a database to the application</a></li>
<li><a href="#trueextending-the-build-for-the-heroku-deployment-environment">1.5.4. Extending the build for the Heroku deployment environment</a></li>
<li><a href="#truesupply-application-specific-setting-for-heroku">1.5.5. Supply application-specific setting for Heroku</a></li>
<li><a href="#truedeploying-the-app">1.5.6. Deploying the app</a></li>
</ul>
</li>
<li><a href="#truea-quick-lesson-in-debugging">1.6. A Quick Lesson In Debugging</a>
<ul class="sectlevel3">
<li><a href="#truedebugging-flow">1.6.1. Debugging Flow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truebackend">2. Backend</a>
<ul class="sectlevel2">
<li><a href="#truethe-domain-model">2.1. The Domain Model</a></li>
<li><a href="#truesetting-up-a-spring-based-backend">2.2. Setting up a Spring-based Backend</a>
<ul class="sectlevel3">
<li><a href="#truerunning-the-backend-application-from-eclipse">2.2.1. Running the Backend Application from Eclipse</a></li>
<li><a href="#truespring-transactions">2.2.2. Spring Transactions</a></li>
<li><a href="#truedebugging-connecting-to-the-database-using-a-client">2.2.3. Debugging: connecting to the database using a client</a></li>
</ul>
</li>
<li><a href="#truecrud-repositories">2.3. CRUD Repositories</a>
<ul class="sectlevel3">
<li><a href="#truecreating-a-crud-repository">2.3.1. Creating a CRUD Repository</a></li>
</ul>
</li>
<li><a href="#trueunit-testing-persistence-in-the-backend">2.4. Unit Testing Persistence in the Backend</a></li>
<li><a href="#truecreating-restful-web-services-in-spring">2.5. Creating RESTful Web Services in Spring</a>
<ul class="sectlevel3">
<li><a href="#trueimplementing-service-methods">2.5.1. Implementing Service Methods</a></li>
<li><a href="#trueexposing-service-functionality-via-a-restful-api">2.5.2. Exposing Service Functionality via a RESTful API</a></li>
<li><a href="#truespring-data-an-alternative-way-to-expose-application-data-via-a-restful-interface">2.5.3. Spring Data - an Alternative Way to Expose Application Data via a RESTful Interface</a></li>
</ul>
</li>
<li><a href="#trueunit-testing-service-methods-in-backend">2.6. Unit Testing Service Methods in Backend</a>
<ul class="sectlevel3">
<li><a href="#trueservice-unit-testing-setup-with-mockito">2.6.1. Service Unit Testing Setup with Mockito</a></li>
<li><a href="#trueimplementing-unit-tests-for-service-class">2.6.2. Implementing Unit Tests for Service Class</a></li>
<li><a href="#trueservice-integration-testing-with-the-curl-tool">2.6.3. Service Integration Testing with the curl Tool</a></li>
</ul>
</li>
<li><a href="#trueassessing-code-coverage-using-eclemma">2.7. Assessing Code Coverage using EclEmma</a>
<ul class="sectlevel3">
<li><a href="#truegetting-eclemma">2.7.1. Getting EclEmma</a></li>
<li><a href="#trueexample-gradle-project-for-assessing-code-coverage">2.7.2. Example Gradle Project for Assessing Code Coverage</a></li>
<li><a href="#trueretrieving-code-coverage-metrics">2.7.3. Retrieving Code Coverage Metrics</a></li>
</ul>
</li>
<li><a href="#trueevent-registration-application-unit-code-coverage">2.8. Event Registration Application Unit Code Coverage</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Sections of the tutorial will continuously be published at this web page.</p>
</div>
<div class="paragraph">
<p>This tutorial serves to give you the practical knowledge required to execute the group project in true AGILE fashion.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueproject-management-tools-and-development-toolchain"><a class="anchor" href="#trueproject-management-tools-and-development-toolchain"></a>1. Project Management Tools and Development Toolchain</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truegit"><a class="anchor" href="#truegit"></a>1.1. Git</h3>
<div class="paragraph">
<p>For our purposes, git is a software tool for tracking changes across application code files and for coordinating work between various programmers working on the same application source code during the application&#8217;s development and life cycle.</p>
</div>
<div class="paragraph">
<p>Glossary&#8201;&#8212;&#8201;Part 1:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Git</strong> is your version control software</p>
</li>
<li>
<p><strong>GitHub</strong> hosts your repositories</p>
</li>
<li>
<p>A <strong>repository</strong> is a collection of files and their history</p>
</li>
<li>
<p>A <strong>commit</strong> is a saved state of the repository</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Glossary&#8201;&#8212;&#8201;Part 2:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Working Directory</strong>: files being worked on right now</p>
</li>
<li>
<p><strong>Staging area</strong>: files ready to be committed</p>
</li>
<li>
<p><strong>Repository</strong>: A collection of commits</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The main git workflow is as follows:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/git-remote.png" alt="git remote"></span></p>
</div>
<div class="paragraph">
<p>Install the Git version control system (VCS) from <a href="https://git-scm.com/downloads" class="bare">https://git-scm.com/downloads</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="truegradle-a-build-framework-and-brief-example"><a class="anchor" href="#truegradle-a-build-framework-and-brief-example"></a>1.2. Gradle: A Build Framework and Brief Example</h3>
<div class="paragraph">
<p>This section focuses on writing a Gradle (<a href="https://gradle.org/" class="bare">https://gradle.org/</a>) build script that builds a single Gradle project referred to as <em>Computation</em>. The source code and tests for a Java application is available here: <a href="https://github.com/McGill-ECSE321-Fall2020/ecse321-tutorial-notes/raw/master/resources/Computation.zip">Computation.zip</a>. It is your job to create/reorganize the folder called <em>Computation</em>, move sources and tests into that folder, and produce the Gradle build script <em>build.gradle</em> within this folder to automate the software build and testing process for this example project.</p>
</div>
<div class="paragraph">
<p>First, open a terminal, and ensure you have the newest version  of Gradle (ver. 7.0+) installed with <code>gradle --version</code>.</p>
</div>
<div class="paragraph">
<p>Follow the steps below and add the snippets listed here to <code>build.gradle</code>, one after the other:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the following folder structure and a new <em>build.gradle</em> (empty) file within the <em>Computation</em> folder:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>Computation
├── build.gradle
└── src
    ├── main
    │   └── java
    │       ├── application
    │       │   └── CompApp.java
    │       ├── computation
    │       │   └── Computation.java
    │       └── view
    │           └── ComputationPage.java
    └── test
        └── java
            └── computation
                ├── AllTests.java
                ├── ComputationTestAddSubstract.java
                └── ComputationTestDivideMultiply.java</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the <code>java</code> and the <code>application</code> plugins to the build configuration script <em>build.gradle</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">apply plugin: 'java'
// This plugin has a predefined 'run' task that we can reuse to use Gradle to execute our application
apply plugin: 'application'</code></pre>
</div>
</div>
</li>
<li>
<p>Add JUnit libraries to the <code>dependencies</code> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">repositories {
    mavenCentral()
}
dependencies {
    testImplementation "junit:junit:4.12"
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add and describe a new task <code>compile(type: JavaCompile)</code> to specify all source files (both application and test) and set the <em>build/bin</em> as destination dir to put all compiled class files in.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">task compile(type: JavaCompile) {
  classpath = sourceSets.main.compileClasspath
  classpath += sourceSets.test.runtimeClasspath
  sourceSets.test.java.outputDir = file('build/bin')
  sourceSets.main.java.outputDir = file('build/bin')
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
One can specify source sets and their variables the following way:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">/*
 * specifying sourceSets is not necessary in this case, since
 * we are applying the default folder structure assumed by Gradle
 */
sourceSets {
  main {
    java { srcDir 'src/main/java' }
  }
  test {
    java { srcDir 'src/test/java'}
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Specify the main class and run the application.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">mainClassName='application.CompApp'</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the command line issue <code>gradle run</code></p>
</div>
</li>
<li>
<p>Describe the <code>jar</code> Gradle task (defined by the <code>java</code> plugin) to produce an executable jar file into <code>distributable/</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">jar {
  destinationDir=file('distributable')
  manifest {
    // It is smart to reuse the name of the main class variable instead of hardcoding it
    attributes "Main-Class": "$mainClassName"
  }
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>settings.gradle</code> and its usage is to be shown later.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="truespring-boot-projects-and-github-project-management"><a class="anchor" href="#truespring-boot-projects-and-github-project-management"></a>1.3. Spring Boot Projects and GitHub Project Management</h3>
<div class="paragraph">
<p>This section touches on the use of Spring Initializer and explores the GitHub Project interface.</p>
</div>
<div class="sect3">
<h4 id="truespring-boot-project-initialization"><a class="anchor" href="#truespring-boot-project-initialization"></a>1.3.1. Spring Boot Project Initialization</h4>
<div class="paragraph">
<p>Spring Boot is an open source framework for creating stand-alone Java-based applications. This is accomplished through the Spring Framework, which provides developers a comprehensive programming and configuration model for their Java applications.</p>
</div>
<div class="paragraph">
<p>We will return to the details of Spring later. For now, our only concern is setting it up.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the <a href="https://start.spring.io/">Spring Initializer</a></p>
</li>
<li>
<p>Use the following settings to generate a spring project:</p>
<div class="imageblock">
<div class="content">
<img src="figs/SpringInit.PNG" alt="Spring Initialization Settings">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Don&#8217;t forget to add the proper dependencies.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click <strong>Generate</strong> and extract the contents of the zip folder to a location where you can find it later.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueapplication-project-setup"><a class="anchor" href="#trueapplication-project-setup"></a>1.3.2. Application Project Setup</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new repository under your account on GitHub for an example application that we are going to develop throughout the semester. Name the repository <strong>eventregistration</strong>. See more on the specification of the application functionality later.</p>
<div class="imageblock">
<div class="content">
<img src="figs/eventregistration-repo.png" alt="Event Registration Repo">
</div>
</div>
</li>
<li>
<p>Clone it somewhere on your disk. We assume you cloned it to <em>~/git/eventregistration</em>.</p>
</li>
<li>
<p>Move the downloaded Spring project folder into the <em>~/git/eventregistration</em> folder.</p>
</li>
<li>
<p>Locate the <em>EventRegistration-Backend</em> folder.</p>
</li>
<li>
<p>For future use, locate the <em>application.properties</em> file in the <em>src/resources</em> folder and add the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">server.port=${PORT:8080}

spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Source: <a href="https://vkuzel.com/spring-boot-jpa-hibernate-atomikos-postgresql-exception" class="bare">https://vkuzel.com/spring-boot-jpa-hibernate-atomikos-postgresql-exception</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Locate the Java file containing the main application class (<code>EventRegistrationApplication.java</code>) and add the following content</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration;

import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.SpringApplication;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.RequestMapping;

@RestController
@SpringBootApplication
public class EventRegistrationBackendApplication {

  public static void main(String[] args) {
    SpringApplication.run(EventRegistrationBackendApplication.class, args);
  }

  @RequestMapping("/")
  public String greeting(){
    return "Hello world!";
  }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that it builds by running <code>gradle build -xtest</code> in the root directory of the backend project (i.e. <em>~/git/eventregistration/EventRegistration-Backend</em>).</p>
</li>
<li>
<p>Commit and push the files of the new Spring project.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">git add .
git status #verify the files that are staged for commit
git commit -m "Initial commit of the backend application"
git push</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truegithub-project-repository"><a class="anchor" href="#truegithub-project-repository"></a>1.3.3. GitHub Project Repository</h4>
<div class="paragraph">
<p>One of the core components of Agile development is being able to manage the development problem space. GitHub projects extends GitHub&#8217;s utility to make problem space management easy.</p>
</div>
<div class="paragraph">
<p>Any repository can be added to a project by selecting the <em>Create New Project</em> button located in the <em>Project</em> tab of the repository.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj5.png" alt="GitProj5">
</div>
</div>
<div class="paragraph">
<p>Below is the layout of the Basic KanBan Board.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj6.png" alt="GitProj6">
</div>
</div>
<div class="paragraph">
<p>By default there are three columns: <strong>To do</strong>, <strong>In progress</strong> and <strong>Done</strong>. More columns can be added by clicking the add column area.</p>
</div>
<div class="paragraph">
<p>Issues that exist already on the GitHub issue board can be searched by filter, then dragged and dropped into the board space. This is done by clicking <em>Add cards</em> at the top right corner.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj7.PNG" alt="GitHub project cards">
</div>
</div>
<div class="paragraph">
<p>It is generally prudent as a software engineer to automate away tedious tasks. You only need to automate it once. You can select various automation actions by clicking the ellipsis (&#8230;&#8203;) at the top right corner of each board.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj8.PNG" alt="GitHub project automation">
</div>
</div>
<div class="paragraph">
<p>That way when you create an issue on the issue board, close an issue etc. it is automatically added to the proper column.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj9.PNG" alt="GitHub project automation result">
</div>
</div>
<div class="paragraph">
<p>To help with better management of the project as you move through project phases, it is prudent to add Milestones. A new milestone can be created by selecting the <em>Issues</em> tab in the repository, and selecting the <em>Milestones</em> tab located next to the <em>New issue</em> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj10.PNG" alt="GitHub project milestone creation">
</div>
</div>
<div class="paragraph">
<p>To create a new milestone, select the <em>New Milestone</em> button. Then, fill out the form with an appropriate name, due date and description. Once your milestone has been created, you can attach issues to the milestone and see their progress by selecting the <em>Milestones</em> tab.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj11.PNG" alt="GitHub project milestone creation button">
</div>
</div>
<div class="paragraph">
<p>To help with better management of the project as you move through project phases, it is prudent to add Milestones. A new milestone can be created by selecting the <em>Issues</em> tab in the repository, and selecting the <em>Milestones</em> tab located next to the <em>New issue</em> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj10.PNG" alt="GitHub project milestone creation">
</div>
</div>
<div class="paragraph">
<p>To create a new milestone, select the <em>New Milestone</em> button. Then, fill out the form with an appropriate name, due date and description. Once your milestone has been created, you can attach issues to the milestone and see their progress by selecting the <em>Milestones</em> tab.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj11.PNG" alt="GitHub project milestone creation button">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj12.PNG" alt="GitHub project milestone tracking">
</div>
</div>
<div class="paragraph">
<p>Finally, you can create issues to track. This is very straight forward, (select <em>New issue</em> button under the <em>Issues</em> tab of the repository), so the rest of this section will deal with some best practices when tracking issues in this course.</p>
</div>
<div class="paragraph">
<p>When creating a new issue it is imperative to be concise but also as descriptive as possible. All the issues you create should have a title, with a comment to describe the issue in detail.</p>
</div>
<div class="paragraph">
<p>All issues at the time of creation should be assigned to someone. You can always change this later. Label your issues. If none of the default labels fit, new labels can be created to meet your need. This is accomplished by selecting the <em>Labels</em> tab next to the <em>Milestones</em> tab under the <em>Issues</em> section. Then click the <em>New Label</em> button. Finally, assign your issue to the appropriate milestone and project.<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj13.PNG" alt="GitHub project issue creation">
</div>
</div>
<div class="paragraph">
<p>For the purpose of tracking progress through the project, never ever ever delete issues. Issues should be closed and reopened as needed but never deleted. Even if a mistake was made during creation of an issue, issues can be edited by their creator.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj14.PNG" alt="GitHub project issue creation">
</div>
</div>
<div class="paragraph">
<p>If you&#8217;ve set everything up correctly. Your issue board should match your KanBan board. The KanBan board should be a snapshot of how the project is going. Nothing should be done manually here. All the manual labor of opening, moving and triaging issues should be done on the issue board.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj15.PNG" alt="GitHub project issue creation">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truegithub-actions-for-continuous-integration"><a class="anchor" href="#truegithub-actions-for-continuous-integration"></a>1.4. GitHub Actions for Continuous Integration</h3>
<div class="paragraph">
<p>Conitnuous integration (CI) is at the core of Agile development. The act of writing, testing and integrating incremental amounts of code often serves to detect errors, bugs and integration pain points sooner.</p>
</div>
<div class="sect3">
<h4 id="truesetup-ci-workflow-and-template"><a class="anchor" href="#truesetup-ci-workflow-and-template"></a>1.4.1. Setup CI Workflow and Template</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to your repository and select <em>Actions</em> in the repository menu tab.</p>
</li>
<li>
<p>Select <em>set up a workflow yourself</em> linked just below the title.
image::figs/githubactions1.png[]</p>
</li>
<li>
<p>Modify the contents of the main.yml to have the following content:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yml" class="language-yml hljs">name: Java CI with Gradle

on:
  push:
    branches: main
  pull_request:
    branches: main

jobs:
  build:

    runs-on: Windows-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 16
      uses: actions/setup-java@v2
      with:
        java-version: '16'
        distribution: 'adopt'
        cache: gradle
    - name: Validate Gradle wrapper
      uses: gradle/wrapper-validation-action@e6e38bacfdf1a337459f332974bb2327a31aaf4b
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew
      working-directory: EventRegistration-Backend
    - name: Build with Gradle
      run: ./gradlew build
      working-directory: EventRegistration-Backend</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The configurations in this YML file are used to determine the environment in which to run the specified GitHub action. Though not required, you will want these configurations to mirror the system you&#8217;re developing on if you implement build actions for the branches you are solely responsible for to make debugging errors easier. On branches with multiple developers, use configurations that have as much commonality as possible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All that&#8217;s left to do is test to make sure it works. Go to local working copy of your repository and initiate a fetch, add, commit, status and push command in that order.</p>
</div>
<div class="paragraph">
<p>The result of workflow runs can be seen under the <em>Actions</em> tab of the repository.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj2.png" alt="Results of workflow run">
</div>
</div>
<div class="paragraph">
<p>To gain more insight into a workflow run, select the workflow run from the list . Even more insight can be gleaned from independent jobs by selecting them from the list of jjobs as well.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj3.png" alt="Workflow run detail">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/GitProj4.png" alt="Job details">
</div>
</div>
<div class="paragraph">
<p><strong>DEBUGGING EXERCISE:</strong> <em>Why did the build fail? How would you fix it?</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueheroku"><a class="anchor" href="#trueheroku"></a>1.5. Heroku</h3>
<div class="paragraph">
<p>Heroku is a cloud based PaaS (Platform as a Service) that allows the development, deployment and operation of applications. In this course, Heroku will be used as a host for our application backend (this includes the database).</p>
</div>
<div class="sect3">
<h4 id="truepreparations"><a class="anchor" href="#truepreparations"></a>1.5.1. Preparations</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sign up/log in on Heroku by visiting <a href="https://www.heroku.com/" class="bare">https://www.heroku.com/</a>.</p>
</li>
<li>
<p>Install the command line client for Heroku: <a href="https://devcenter.heroku.com/articles/heroku-cli">Heroku CLI</a></p>
</li>
<li>
<p>Log in to Heroku CLI by opening a terminal and typing: <code>heroku login -i</code>. Enter your username and your password.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="truecreating-a-heroku-app"><a class="anchor" href="#truecreating-a-heroku-app"></a>1.5.2. Creating a Heroku app</h4>
<div class="paragraph">
<p>We are creating a Heroku application and deploying the <em>Hello world!</em> Spring example. Additionally, the steps below will make it possible to store multiple different applications in the same git repository and deploy them individually to Heroku. Steps will be shown through the example EventRegistration application, and should be adapted in the course project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All actions described here for configuring Heroku applications using the Heroku CLI could also be done via the web UI.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once you are logged in with the Heroku-CLI, create a new Heroku application: in the root of the git repository of your repository (assumed to be <em>~/git/eventregistration</em>), issue <code>heroku create eventregistration-backend-&lt;UNIQUE_ID&gt; -n</code> to create an application named "eventregistration-backend-&lt;UNIQUE_ID&gt;".<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In Heroku, the application name should be unique Heroku-wise, that is, each application in Heroku&#8217;s system should have a unique name. If you don&#8217;t provide a name parameter for the command, Heroku will randomly generate one. Make sure the value selected for &lt;UNIQUE_ID&gt; is alphanumeric and ends in letters. When entering a value for UNIQUE_ID replace "&lt;UNIQUE_ID&gt;" with this value. Do not include the "&lt;&gt;" in your command. This is a delimiter to indicate a parameter.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add the <a href="https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-multi-procfile">multi procfile</a> and <a href="https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-gradle">Gradle</a> buildpacks to the app.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">heroku buildpacks:add -a eventregistration-backend-&lt;UNIQUE_ID&gt; https://github.com/heroku/heroku-buildpack-multi-procfile
heroku buildpacks:add -a eventregistration-backend-&lt;UNIQUE_ID&gt; heroku/gradle</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Order is important.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueadding-a-database-to-the-application"><a class="anchor" href="#trueadding-a-database-to-the-application"></a>1.5.3. Adding a database to the application</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Heroku applications web page and go to <em>Resources</em>, then add the Heroku Postgres add-on.<br>
<span class="image"><img src="figs/heroku-postgres.png" alt="Heroku Postgres add-on" width="600"></span><br></p>
</li>
<li>
<p>Click the entry for Postgres within the list of add-ons, then go to <em>Settings</em>. You can see the database credentials there.
<span class="image"><img src="figs/heroku-postgres-credentials.png" alt="Heroku Postgres add-on" width="600"></span><br></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/heroku-postgres-credentials2.png" alt="Heroku Postgres add-on" width="600"></span><br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The credentials are periodically updated and changed by Heroku, so make sure that you are using the actual credentials when manually connecting to the database. (E.g., during manual testing.)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="trueextending-the-build-for-the-heroku-deployment-environment"><a class="anchor" href="#trueextending-the-build-for-the-heroku-deployment-environment"></a>1.5.4. Extending the build for the Heroku deployment environment</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before deploying, a top level <em>build.gradle</em> and <em>settings.gradle</em> need to be created in the root of the repository (i.e., in <em>~/git/eventregistration</em>)<br>
<em>build.gradle</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">task stage () {
    dependsOn ':EventRegistration-Backend:assemble'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>settings.gradle</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">include ':EventRegistration-Backend'</code></pre>
</div>
</div>
</li>
<li>
<p>Generate the Gradle wrapper with the newest Gradle version</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">gradle wrapper --gradle-version 6.6.1</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <em>.gitignore</em> file for the <em>.gradle</em> folder:<br>
<em>.gitignore</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.gradle/</code></pre>
</div>
</div>
</li>
<li>
<p>Add all new files to git</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">git add .
git status #make sure that files in .gradle/ are not added</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected output for <code>git status</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">On branch master
Your branch is ahead of 'origin/master' by 2 commits.
  (use "git push" to publish your local commits)

Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

	new file:   .gitignore
	new file:   build.gradle
	new file:   gradle/wrapper/gradle-wrapper.jar
	new file:   gradle/wrapper/gradle-wrapper.properties
	new file:   gradlew
	new file:   gradlew.bat
	new file:   settings.gradle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Commit changes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">git commit -m "Adding Gradle wrapper"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="truesupply-application-specific-setting-for-heroku"><a class="anchor" href="#truesupply-application-specific-setting-for-heroku"></a>1.5.5. Supply application-specific setting for Heroku</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within the <em>EventRegistration-Backend</em> folder, create a file called <em>Procfile</em> (<strong>not</strong> Procfile.txt, name it <strong>exactly</strong> Procfile) with the content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">web: java -jar EventRegistration-Backend/build/libs/EventRegistration-Backend-0.0.1-SNAPSHOT.jar</code></pre>
</div>
</div>
</li>
<li>
<p>Add the Procfile to a new commit</p>
</li>
<li>
<p>Configure the multi-procfile buildpack to find the Procfile (this is a terminal/cmd/powershell command):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">heroku config:add PROCFILE=EventRegistration-Backend/Procfile --app eventregistration-backend-&lt;UNIQUE_ID&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="truedeploying-the-app"><a class="anchor" href="#truedeploying-the-app"></a>1.5.6. Deploying the app</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain and copy the <em>Heroku Git URL</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">heroku git:remote --app eventregistration-backend-&lt;UNIQUE_ID&gt; --remote backend-heroku</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">set git remote backend-heroku to https://git.heroku.com/eventregistration-backend-&lt;UNIQUE_ID&gt;.git</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the <code>backend-heroku</code> remote is successfully added besides <code>origin</code> with <code>git remote -v</code>. Output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">backend-heroku	https://git.heroku.com/eventregistration-backend-123.git (fetch)
backend-heroku	https://git.heroku.com/eventregistration-backend-123.git (push)
origin	git@github.com:imbur/eventregistration.git (fetch)
origin	git@github.com:imbur/eventregistration.git (push)</code></pre>
</div>
</div>
</li>
<li>
<p>Deploy your application with</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">git push backend-heroku main</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If it fails to build, make sure you try understanding the output. Typical issue: buildpacks are not added/are not in the right order, failing tests, etc. (If you did not fix the build from the previous section, then pushing to the Heroku repository will fail, as Heroku cannot deploy an application it can&#8217;t build).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If build and deployment are a success, visit the link provided in the build output. It may take some time (even 30-60 seconds) for the server to answer the first HTTP request, so be patient!</p>
</li>
<li>
<p>Save your work to the GitHub repository, too: <code>git push origin master</code><br>
Final layout of the files (only two directory levels are shown and hidden items are suppressed):<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>~/git/eventregistration
├── build.gradle
├── EventRegistration-Backend
│   ├── build
│   │   ├── classes
│   │   ├── libs
│   │   ├── resources
│   │   └── tmp
│   ├── build.gradle
│   ├── gradle
│   │   └── wrapper
│   ├── gradlew
│   ├── gradlew.bat
│   ├── Procfile
│   ├── settings.gradle
│   └── src
│       ├── main
│       └── test
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── README.md
└── settings.gradle</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truea-quick-lesson-in-debugging"><a class="anchor" href="#truea-quick-lesson-in-debugging"></a>1.6. A Quick Lesson In Debugging</h3>
<div class="paragraph">
<p>Before moving on the the subsequent step it is necessary to ensure that the Event Registration project builds locally, on GitHub and on Heroku. Without this, we cannot continue building the project.</p>
</div>
<div class="sect3">
<h4 id="truedebugging-flow"><a class="anchor" href="#truedebugging-flow"></a>1.6.1. Debugging Flow</h4>
<div class="paragraph">
<p>The general flow for debugging can be seen in the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/debug.PNG" alt="debug">
</div>
</div>
<div class="paragraph">
<p>When addressing an error/bug during a build process, building locally takes precedence for several reasons, the most important of which is mitigating error/bug propagation to others working on the same branch within the same project. In addition to this, it&#8217;s easier to access debugging logs locally than remotely on GitHub or Heroku, especially when an internet connection is unreliable.</p>
</div>
<div class="paragraph">
<p>The process then propagates to committing and pushing the changes to GitHub, checking that GitHub Actions successfully builds. If the build fails, it is possible to check the workflow log to see why. To gain more insight if the details are not enough, <a href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/enabling-debug-logging">additional debug logging</a> can be enabled.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/Details.PNG" alt="Details">
</div>
</div>
<div class="paragraph">
<p>Finally, the project is deployed to Heroku. The same general process used for GitHub Actions can be used for Heroku. Heroku build logs can be seen when executing:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">git push backend-heroku main</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/HerokuFail.PNG" alt="HerokuFail">
</div>
</div>
<div class="paragraph">
<p>or through the web interface under the Overview tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/HerokuLog.PNG" alt="HerokuLog">
</div>
</div>
<div class="paragraph">
<p>A live demonstration of this process will be given in your tutorial section.</p>
</div>
<div class="paragraph">
<p>The <strong><em>suggested potential</em></strong> fixes implemented to allow the Event Registration Project to build locally, on GitHub and Heroku are as follows (follow the debugging flowchart after each step):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the package names are identical in <strong><em>EventRegistrationBackendApplication.java</em></strong> and <strong><em>EventRegistrationBackendApplicationTests.java</em></strong>. The former is located in <em>src&gt;main&gt;java</em> and the latter in <em>src&gt;test&gt;java</em> directory.</p>
</li>
<li>
<p>Comment out the highlighted lines (including line 9 containing the @Test annotation) in the <strong><em>EventRegistrationBackendApplicationTests.java</em></strong> file (they will be reactivated later):</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/commentsTest.PNG" alt="commentsTest">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Modify the <em>settings.gradle</em> file at the root of the project to match the following (The value for the <em>rootProject.name</em> property should match the name of your root directory):<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>rootProject.name = 'eventregistration'
include 'EventRegistration-Backend'</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add a file named <em>system.properties</em> to the root directory of your repository, and then update it with the following content (to maintain cohesion and smoothness in development, the <em>java.runtime.version</em> property should be the Heroku supported version closest to the version you have installed):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java.runtime.version=17</pre>
</div>
</div>
<div class="paragraph">
<p>In the event that there are version discrepencies between members of a group, it could help designate one person to be responsible for deploying the application on Heroku.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truebackend"><a class="anchor" href="#truebackend"></a>2. Backend</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truethe-domain-model"><a class="anchor" href="#truethe-domain-model"></a>2.1. The Domain Model</h3>
<div class="paragraph">
<p>Our task is to build an event registration application that allows people to register for events. Before we can program anything we need to model the application.</p>
</div>
<div class="paragraph">
<p>For this, use the free modelling program <a href="https://cruise.umple.org/umpleonline/">Umple</a>. Full documentation on how to use Umple can be found <a href="https://cruise.umple.org/umple/GettingStarted.html">here</a>.</p>
</div>
<div class="paragraph">
<p>Ensure that Umple is configured as shown in the image below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/UmpleConfig.png" alt="UmpleConfig">
</div>
</div>
<div class="paragraph">
<p>The final model can be found below and is generated by the following code:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/DomainModel.PNG" alt="DomainModel">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="Umple" class="language-Umple hljs">class RegistrationManager
{
}

class Person
{
  name;
}

class Event
{
  name;
  Date eventDate;
  Time startTime;
  Time endTime;
}

class Registration
{
  Integer id;
  }

association {
    1 RegistrationManager registrationManager &lt;@&gt;- 0..* Registration registrations;
}

association {
    1 RegistrationManager registrationManager &lt;@&gt;- 0..* Event events;
}

association {
    1 RegistrationManager registrationManager &lt;@&gt;- 0..* Person persons;
}

association {
   0..* Registration registration -&gt;  1 Event event ;
}


association {
    0..* Registration registration -&gt;  1 Person person;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although the Umple generated Java code can be used, but is too verbose and not JPA compliant. You can see this by comparing the generated Java code to the code found in <a href="https://github.com/McGill-ECSE321-Fall2020/ecse321-tutorial-notes/raw/master/resources/Model%20Classes.zip">Model Classes.zip</a>.</p>
</div>
<div class="paragraph">
<p>This is an exercise in being able to write JPA compliant code simply by looking at the domain model. A brief explanation for relevant JPA tags is here provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>@Entity</strong>: Placed before the class declaration to signify an entity.</p>
</li>
<li>
<p><strong>@Id</strong>: Placed before the get method for the attribute that will serve as the primary identifier for the class.</p>
</li>
<li>
<p><strong>@OnetoMany</strong> or <strong>@ManytoOne</strong>: Placed before get method for attribute to signify the multiplicity in associative relationship between the current class and reference class. The first word is the multiplicity of the current class, with the other representing the multiplicity of the other calss. The <em>cascade</em> property being set to <em>cascadeType.ALL</em> ensures all operations of the defining class are persisted. The <em>optional</em> property being set to false means the association the tag defines must exist. In this case, the defining class cannot exist without knowledge of the referenced class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once your java code has been annotated, create a new folder under <em>src&gt;main&gt;java</em> called model and add the model files into that folder. Make sure your model files declare the package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.model;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truesetting-up-a-spring-based-backend"><a class="anchor" href="#truesetting-up-a-spring-based-backend"></a>2.2. Setting up a Spring-based Backend</h3>
<div class="paragraph">
<p>You can download the Spring Tools Suite IDE from <a href="https://spring.io/tools">here</a>.</p>
</div>
<div class="sect3">
<h4 id="truerunning-the-backend-application-from-eclipse"><a class="anchor" href="#truerunning-the-backend-application-from-eclipse"></a>2.2.1. Running the Backend Application from Eclipse</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Import the <strong>EventRegistration-Backend</strong> Spring Boot project as a Gradle project from <em>File &gt; Import&#8230;&#8203; &gt; Gradle &gt; Existing Gradle project</em> using the default settings. Select the previously generated Spring project folder as the root of the project.<br>
<span class="image"><img src="figs/gradle-import.png" alt="Gradle project import in Eclipse" width="600"></span></p>
</li>
<li>
<p>Ignore the bin folder.<br>
<span class="image"><img src="figs/sts-ignore-bin.png" alt="sts ignore bin" width="600"></span></p>
</li>
<li>
<p>Find the <code>EventRegistrationApplication.java</code> source file, then right click and select <em>Run As &gt; Spring Boot App</em>. The application will fail to start, since the database is not yet configured, but this action will create an initial run configuration. Example console output (fragment):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[...]
***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class
[...]</code></pre>
</div>
</div>
</li>
<li>
<p>Obtain the database URL to access the database remotely, e.g., by opening up a terminal and running:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>heroku run echo \$JDBC_DATABASE_URL --app=&lt;YOUR_BACKEND_APP_NAME&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>If you are on Windows, open up command line or powershell and run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">heroku run echo '$JDBC_DATABASE_URL' --app=&lt;YOUR_BACKEND_APP_NAME&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Eclipse, open the <em>EventRegistration-Backend - EventregistrationApplication</em> run configuration page and add an environment variable called <code>SPRING_DATASOURCE_URL</code> with the value obtained in the previous step.<br>
<span class="image"><img src="figs/jdbc-url.png" alt="Adding env var to run config" width="600"></span></p>
</li>
<li>
<p>Add the <code>spring.jpa.hibernate.ddl-auto=update</code> to <code>application.properties</code>. The database content along with the tables this way will be deleted (as necessary) then re-created each time your application starts.<br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In production, the value of this property should be <code>none</code> (instead of <code>update</code>). Possible values are <code>none</code>, <code>create</code>, <code>validate</code>, and <code>update</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If needed: troubleshooting:</p>
<div class="ulist">
<ul>
<li>
<p>If you get an error message saying something similar to <code>createClob() is not yet implemented</code>, then you can try setting the <code>spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true</code> variable in your <code>application.properties</code>. It could be a workaround a workaround for an issue with Postgres.<br></p>
</li>
<li>
<p>Sometimes environment variables don&#8217;t work with Spring apps. In this case you can set the <code>spring.datasource.url</code>, the <code>spring.datasource.username</code>, and the <code>spring.datasource.password</code> variables in the application properties as an alternative to setting the <code>SPRING_DATASOURCE_URL</code> environment variable.<br></p>
</li>
<li>
<p>Make sure no other apps are running on <a href="localhost:8080">localhost:8080</a>. You can test it by opening the browser and entering <code>localhost:8080</code> as the address.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="truespring-transactions"><a class="anchor" href="#truespring-transactions"></a>2.2.2. Spring Transactions</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Verify</strong> the contents of the <code>EventRegistrationBackendApplication</code> class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration;

import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.SpringApplication;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.RequestMapping;

@RestController
@SpringBootApplication
public class EventRegistrationBackendApplication {

	public static void main(String[] args) {
		SpringApplication.run(EventRegistrationApplication.class, args);
	}

	@RequestMapping("/")
	public String greeting() {
		return "Hello world!";
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new package in <code>src/main/java</code> and name it <code>ca.mcgill.ecse321.eventregistration.dao</code>.</p>
</li>
<li>
<p>Create the <code>EventRegistrationRepository</code> class within this new package</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dao;

import java.sql.Date;
import java.sql.Time;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.TypedQuery;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Event;

@Repository
public class EventRegistrationRepository {

	@Autowired
	EntityManager entityManager;

	@Transactional
	public Person createPerson(String name) {
		Person p = new Person();
		p.setName(name);
		entityManager.persist(p);
		return p;
	}

	@Transactional
	public Person getPerson(String name) {
		Person p = entityManager.find(Person.class, name);
		return p;
	}

	@Transactional
	public Event createEvent(String name, Date date, Time startTime, Time endTime) {
		Event e = new Event();
		e.setName(name);
		e.setDate(date);
		e.setStartTime(startTime);
		e.setEndTime(endTime);
		entityManager.persist(e);
		return e;
	}

	@Transactional
	public Event getEvent(String name) {
		Event e = entityManager.find(Event.class, name);
		return e;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Add a new method that gets all events before a specified date (<code>deadline</code>). Use a typed query created from an SQL command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public List&lt;Event&gt; getEventsBeforeADeadline(Date deadline) {
	TypedQuery&lt;Event&gt; q = entityManager.createQuery("select e from Event e where e.date &lt; :deadline",Event.class);
	q.setParameter("deadline", deadline);
	List&lt;Event&gt; resultList = q.getResultList();
	return resultList;
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To try the methods, you can create a JUnit test under <em>src/test/java</em>. Currently the methods in <code>EventRegistrationRepository</code> directly access the objects stored in the database via the <code>EntityManager</code> instance and these methods should implement both database operations and service business logic (including input validation&#8201;&#8212;&#8201;which we omitted in this part). In later sections, however, we will see how we can easily separate the database access and the service business logic in Spring applications.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="truedebugging-connecting-to-the-database-using-a-client"><a class="anchor" href="#truedebugging-connecting-to-the-database-using-a-client"></a>2.2.3. Debugging: connecting to the database using a client</h4>
<div class="paragraph">
<p>There are cases when a developer wants to know the contents of the database. In this case, a database client program can be used to access the database schema and table contents. Here are the general steps to access the Postgres database provided by Heroku:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Obtain the database URL to access the database remotely, e.g., by opening up a terminal and running: <code>heroku run echo \$JDBC_DATABASE_URL --app=&lt;YOUR_BACKEND_APP_NAME&gt;</code>.</p>
</li>
<li>
<p>The returned value follows the format that holds all main important parameters that are needed for accessing the database server:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">jdbc:postgresql://&lt;HOST&gt;:&lt;PORT&gt;/&lt;DATABASE_NAME&gt;?user=&lt;USERNAME&gt;&amp;password=&lt;PASSWORD&gt;&amp;sslmode=require</code></pre>
</div>
</div>
<div class="paragraph">
<p>These parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database host: the URL for the server</p>
</li>
<li>
<p>Port: the por on which the DB server is listening</p>
</li>
<li>
<p>Database name: the first section after the URL</p>
</li>
<li>
<p>Username: the first parameter value in the provided URL</p>
</li>
<li>
<p>Password: the second parameter value in the provided URL</p>
</li>
</ul>
</div>
</li>
<li>
<p>With these parameters you can use any Postgres client you prefer to connect to the database. Here is an example for such a connection from Linux using <code>postgres-client</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$&gt; psql postgresql://ec2-54-243-223-245.compute-1.amazonaws.com:5432/d4412g60aaboa7?user=hdjnflfirvkmmr
Password:
psql (10.6 (Ubuntu 10.6-0ubuntu0.18.04.1))
SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
Type "help" for help.

d4412g60aaboa7=&gt; \dt
                          List of relations
 Schema |                Name                | Type  |     Owner
--------+------------------------------------+-------+----------------
 public | event                              | table | hdjnflfirvkmmr
 public | person                             | table | hdjnflfirvkmmr
 public | registration                       | table | hdjnflfirvkmmr
 public | registration_manager               | table | hdjnflfirvkmmr
 public | registration_manager_events        | table | hdjnflfirvkmmr
 public | registration_manager_persons       | table | hdjnflfirvkmmr
 public | registration_manager_registrations | table | hdjnflfirvkmmr
(7 rows)

d4412g60aaboa7=&gt; select * from event ;
 name |    date    | end_time | start_time
------+------------+----------+------------
 e1   | 3899-10-09 | 12:00:00 | 10:00:00
(1 row)

d4412g60aaboa7=&gt; \q
$&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truecrud-repositories"><a class="anchor" href="#truecrud-repositories"></a>2.3. CRUD Repositories</h3>
<div class="paragraph">
<p>Previously, in the <code>ca.mcgill.ecse321.eventregistration.dao.EventRegistrationRepository</code> class we used an instance of <code>javax.persistence.EntityManager</code> from Hibernate to directly implement the required operations related to saving/retrieving data to/from a database (Create, Read, Update, and Delete operations, shortly, CRUD).
This section will introduce the Spring framework&#8217;s inbuilt support for such CRUD operations via the <code>org.springframework.data.repository.CrudRepository</code> interface and will show how to use such repositories to implement your use cases in so-called <em>service</em> classes.</p>
</div>
<div class="paragraph">
<p>If you would like to, you can obtain a version of the project that already has the code for the backend and model classes from the previous tutorials <a href="https://github.com/McGill-ECSE321-Fall2020/eventregistration">here</a>.</p>
</div>
<div class="sect3">
<h4 id="truecreating-a-crud-repository"><a class="anchor" href="#truecreating-a-crud-repository"></a>2.3.1. Creating a CRUD Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new interface <code>PersonRepository</code> in the <code>ca.mcgill.ecse321.eventregistration.dao</code> package and extend the <code>CrudRepository&lt;Person, String&gt;</code> interface</p>
</li>
<li>
<p>Create a new method <code>Person findByName(String name)</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dao;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Person;

public interface PersonRepository extends CrudRepository&lt;Person, String&gt;{

	Person findPersonByName(String name);

}</code></pre>
</div>
</div>
</li>
<li>
<p>Since Spring supports automated JPA Query creation from method names (see <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation">possible language constructs here</a>) <strong>we don&#8217;t need to implement the interface manually</strong>, Spring JPA will create the corresponding queries runtime! This way we don&#8217;t need to write SQL queries either.</p>
</li>
<li>
<p>Create interfaces for the <code>Event</code> and <code>Registration</code> classes as well<br>
<em>EventRepository.java</em>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dao;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Event;

public interface EventRepository extends CrudRepository&lt;Event, String&gt; {

	Event findEventByName(String name);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>RegistrationRepository.java</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dao;

import java.util.List;

import org.springframework.data.repository.CrudRepository;

import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;

public interface RegistrationRepository extends CrudRepository&lt;Registration, Integer&gt; {

	List&lt;Registration&gt; findByPerson(Person personName);

	boolean existsByPersonAndEvent(Person person, Event eventName);

	Registration findByPersonAndEvent(Person person, Event eventName);

}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, create a new package in <code>src/main/java</code> and name it <code>ca.mcgill.ecse321.eventregistration.model</code>. Place all the model classes generated in the Step 2.4. By now, all the errors in all other packages should be resolved automatically. In the end, you should have the given below structure in terms of packages.<br></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/package-structure-1.png" alt="Package Structure" width="400"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueunit-testing-persistence-in-the-backend"><a class="anchor" href="#trueunit-testing-persistence-in-the-backend"></a>2.4. Unit Testing Persistence in the Backend</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In a fresh Spring Boot project, there is already a single test class <code>EventRegistrationApplicationTests</code> in the <em>src/test/java</em> folder that looks like the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class EventRegistrationBackendApplicationTests {

	@Test
	void contextLoads() {
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Run this test that checks if the application can successfully load by <em>right clicking on the class &#8594; Run as&#8230;&#8203; &#8594; JUnit test</em><br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to set the <code>SPRING_DATASOURCE_URL</code> for the test run configuration as well if you use an environment variable to set datasource URL (see earlier).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add a new test class <code>ca.mcgill.ecse321.eventregistration.dao.TestEventRegistrationPersistence</code> and implement tests for the persistence</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dao;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;

import java.sql.Date;
import java.sql.Time;
import java.time.LocalDate;
import java.time.LocalTime;
import java.time.Month;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit.jupiter.SpringExtension;

import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;

@ExtendWith(SpringExtension.class)
@SpringBootTest
public class TestEventRegistrationPersistence {

	@Autowired
	private PersonRepository personRepository;
	@Autowired
	private EventRepository eventRepository;
	@Autowired
	private RegistrationRepository registrationRepository;

	@AfterEach
	public void clearDatabase() {
		// Fisrt, we clear registrations to avoid exceptions due to inconsistencies
		registrationRepository.deleteAll();
		// Then we can clear the other tables
		personRepository.deleteAll();
		eventRepository.deleteAll();
	}

	@Test
	public void testPersistAndLoadPerson() {
		String name = "TestPerson";
		// First example for object save/load
		Person person = new Person();
		// First example for attribute save/load
		person.setName(name);
		personRepository.save(person);

		person = null;

		person = personRepository.findPersonByName(name);
		assertNotNull(person);
		assertEquals(name, person.getName());
	}

	@Test
	public void testPersistAndLoadEvent() {
		String name = "ECSE321 Tutorial";
		Date date = java.sql.Date.valueOf(LocalDate.of(2020, Month.JANUARY, 31));
		Time startTime = java.sql.Time.valueOf(LocalTime.of(11, 35));
		Time endTime = java.sql.Time.valueOf(LocalTime.of(13, 25));
		Event event = new Event();
		event.setName(name);
		event.setDate(date);
		event.setStartTime(startTime);
		event.setEndTime(endTime);
		eventRepository.save(event);

		event = null;

		event = eventRepository.findEventByName(name);

		assertNotNull(event);
		assertEquals(name, event.getName());
		assertEquals(date, event.getDate());
		assertEquals(startTime, event.getStartTime());
		assertEquals(endTime, event.getEndTime());
	}

	@Test
	public void testPersistAndLoadRegistration() {
		String personName = "TestPerson";
		Person person = new Person();
		person.setName(personName);
		personRepository.save(person);

		String eventName = "ECSE321 Tutorial";
		Date date = java.sql.Date.valueOf(LocalDate.of(2020, Month.JANUARY, 31));
		Time startTime = java.sql.Time.valueOf(LocalTime.of(11, 35));
		Time endTime = java.sql.Time.valueOf(LocalTime.of(13, 25));
		Event event = new Event();
		event.setName(eventName);
		event.setDate(date);
		event.setStartTime(startTime);
		event.setEndTime(endTime);
		eventRepository.save(event);

		Registration reg = new Registration();
		int regId = 1;
		// First example for reference save/load
		reg.setId(regId);
		reg.setPerson(person);
		reg.setEvent(event);
		registrationRepository.save(reg);

		reg = null;

		reg = registrationRepository.findByPersonAndEvent(person, event);
		assertNotNull(reg);
		assertEquals(regId, reg.getId());
		// Comparing by keys
		assertEquals(person.getName(), reg.getPerson().getName());
		assertEquals(event.getName(), reg.getEvent().getName());
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>In the end, you should have the given below structure in terms of packages.<br></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/package-structure-2.png" alt="Package Structure" width="400"></span></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run this test suite by <em>right clicking on the class &#8594; Run as&#8230;&#8203; &#8594; JUnit test</em>. Again, don&#8217;t forget to set the <code>SPRING_DATASOURCE_URL</code> value for the run configuration.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truecreating-restful-web-services-in-spring"><a class="anchor" href="#truecreating-restful-web-services-in-spring"></a>2.5. Creating RESTful Web Services in Spring</h3>
<div class="paragraph">
<p>The following steps provide guidance on (1) implementing business logic that implements the required functionality (classes annotated with <code>@Service</code>) and (2) exposing them using a REST API in the context of the Event Registration Application (classes annotated with <code>@RestController</code>).</p>
</div>
<div class="sect3">
<h4 id="trueimplementing-service-methods"><a class="anchor" href="#trueimplementing-service-methods"></a>2.5.1. Implementing Service Methods</h4>
<div class="paragraph">
<p>We implement use-cases in <em>service classes</em> by using the DAOs for each data type of the domain model.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In <em>src/main/java</em>, create a new package <code>ca.mcgill.ecse321.eventregistration.service</code>.</p>
</li>
<li>
<p>In this package, create the <code>EventRegistrationService</code> class as shown below</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.service;

import java.sql.Date;
import java.sql.Time;
import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import ca.mcgill.ecse321.eventregistration.dao.EventRepository;
import ca.mcgill.ecse321.eventregistration.dao.PersonRepository;
import ca.mcgill.ecse321.eventregistration.dao.RegistrationRepository;
import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;

@Service
public class EventRegistrationService {

	@Autowired
	EventRepository eventRepository;
	@Autowired
	PersonRepository personRepository;
	@Autowired
	RegistrationRepository registrationRepository;

	@Transactional
	public Person createPerson(String name) {
		Person person = new Person();
		person.setName(name);
		personRepository.save(person);
		return person;
	}

	@Transactional
	public Person getPerson(String name) {
		Person person = personRepository.findPersonByName(name);
		return person;
	}

	@Transactional
	public List&lt;Person&gt; getAllPersons() {
		return toList(personRepository.findAll());
	}

	@Transactional
	public Event createEvent(String name, Date date, Time startTime, Time endTime) {
		Event event = new Event();
		event.setName(name);
		event.setDate(date);
		event.setStartTime(startTime);
		event.setEndTime(endTime);
		eventRepository.save(event);
		return event;
	}

	@Transactional
	public Event getEvent(String name) {
		Event event = eventRepository.findEventByName(name);
		return event;
	}

	@Transactional
	public List&lt;Event&gt; getAllEvents() {
		return toList(eventRepository.findAll());
	}

	@Transactional
	public Registration register(Person person, Event event) {
		Registration registration = new Registration();
		registration.setId(person.getName().hashCode() * event.getName().hashCode());
		registration.setPerson(person);
		registration.setEvent(event);

		registrationRepository.save(registration);

		return registration;
	}

	@Transactional
	public List&lt;Registration&gt; getAllRegistrations(){
		return toList(registrationRepository.findAll());
	}

	@Transactional
	public List&lt;Event&gt; getEventsAttendedByPerson(Person person) {
		List&lt;Event&gt; eventsAttendedByPerson = new ArrayList&lt;&gt;();
		for (Registration r : registrationRepository.findByPerson(person)) {
			eventsAttendedByPerson.add(r.getEvent());
		}
		return eventsAttendedByPerson;
	}

	private &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable){
		List&lt;T&gt; resultList = new ArrayList&lt;T&gt;();
		for (T t : iterable) {
			resultList.add(t);
		}
		return resultList;
	}

}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueexposing-service-functionality-via-a-restful-api"><a class="anchor" href="#trueexposing-service-functionality-via-a-restful-api"></a>2.5.2. Exposing Service Functionality via a RESTful API</h4>
<div class="sect4">
<h5 id="truebuilding-a-restful-web-service-using-a-controller-and-data-transfer-objects"><a class="anchor" href="#truebuilding-a-restful-web-service-using-a-controller-and-data-transfer-objects"></a>Building a RESTful Web Service Using a Controller and Data Transfer Objects</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We first create a new package <code>ca.mcgill.ecse321.eventregistration.controller</code> in EventRegistration-Backend and then create <code>EventRegistrationRestController</code> class inside it. We add the annotation <code>@RestController</code> to the controller class so that HTTP requests can be dispacthed to <code>EventRegistrationRestController</code> class. In addition, we enabled the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin Resource Sharing</a> for any domain using the <code>@CrossOrigin</code> annotation on the REST controller class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.controller;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.RestController;

@CrossOrigin(origins = "*")
@RestController
public class EventRegistrationRestController {

	@Autowired
	private EventRegistrationService service;

}</code></pre>
</div>
</div>
</li>
<li>
<p>We further create another package ca.mcgill.ecse321.eventregistration.dto and create the below Data Transfer Object (DTO) classes inside that package. First we create EventDto.java.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Data Access Object (DAO) != Data Transfer Object (DTO). These two are completely separate concepts, as you will also see below. These two should not be confused with each other.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dto;

import java.sql.Date;
import java.sql.Time;

public class EventDto {

	private String name;
	private Date eventDate;
	private Time startTime;
	private Time endTime;

	public EventDto() {
	}

	public EventDto(String name) {
		this(name, Date.valueOf("1971-01-01"), Time.valueOf("00:00:00"), Time.valueOf("23:59:59"));
	}

	public EventDto(String name, Date eventDate, Time startTime, Time endTime) {
		this.name = name;
		this.eventDate = eventDate;
		this.startTime = startTime;
		this.endTime = endTime;
	}

	public String getName() {
		return name;
	}

	public Date getEventDate() {
		return eventDate;
	}

	public Time getStartTime() {
		return startTime;
	}

	public Time getEndTime() {
		return endTime;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Next, we create <code>PersonDto</code> Java class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dto;

import java.util.Collections;
import java.util.List;

public class PersonDto {

	private String name;
	private List&lt;EventDto&gt; events;

	public PersonDto() {
	}

	@SuppressWarnings("unchecked")
	public PersonDto(String name) {
		this(name, Collections.EMPTY_LIST);
	}

	public PersonDto(String name, List&lt;EventDto&gt; arrayList) {
		this.name = name;
		this.events = arrayList;
	}

	public String getName() {
		return name;
	}

	public List&lt;EventDto&gt; getEvents() {
		return events;
	}

	public void setEvents(List&lt;EventDto&gt; events) {
		this.events = events;
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, we create <code>RegistrationDto</code> Java class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.dto;

public class RegistrationDto {

	private PersonDto person;
	private EventDto event;

	public RegistrationDto() {
	}

	public RegistrationDto(PersonDto person, EventDto event) {
		this.person = person;
		this.event = event;
	}

	public PersonDto getperson() {
		return person;
	}

	public void setperson(PersonDto person) {
		this.person = person;
	}

	public EventDto getEvent() {
		return event;
	}

	public void setEvent(EventDto event) {
		this.event = event;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>We start adding the methods in the <code>EventRegistrationRestController</code> class. Also, we will add annotaions to map HTTP requests.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In Spring Tools Suite (a.k.a. Eclipse), you can organize Java imports with kbd:[Ctrl+Shift+o]
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GetMapping(value = { "/persons", "/persons/" })
public List&lt;PersonDto&gt; getAllPersons() {
	return service.getAllPersons().stream().map(p -&gt; convertToDto(p)).collect(Collectors.toList());
}

@PostMapping(value = { "/persons/{name}", "/persons/{name}/" })
public PersonDto createPerson(@PathVariable("name") String name) throws IllegalArgumentException {
	Person person = service.createPerson(name);
	return convertToDto(person);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@RequestMapping</code> annotation is used to map HTTP requests to Spring Controller methods. Since, <code>@RequestMapping</code> maps all HTTP operations by default. We can use <code>@GetMapping</code>, <code>@PostMapping</code> and so forth to narrow this mapping to specific HTTP operations.</p>
</div>
<div class="paragraph">
<p>Moreover, in the above snippet, we use the <code>value</code> parameter of <code>@PathVariable</code> annotation to bind the value of the query string parameter name into the name parameter of the <code>createPerson()</code> method.</p>
</div>
</li>
<li>
<p>You can add other methods similarly with appropriate mappings.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PostMapping(value = { "/events/{name}", "/events/{name}/" })
public EventDto createEvent(@PathVariable("name") String name, @RequestParam Date date,
@RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.TIME, pattern = "HH:mm") LocalTime startTime,
@RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.TIME, pattern = "HH:mm") LocalTime endTime)
throws IllegalArgumentException {
	Event event = service.createEvent(name, date, Time.valueOf(startTime), Time.valueOf(endTime));
	return convertToDto(event);
}

@GetMapping(value = { "/events", "/events/" })
public List&lt;EventDto&gt; getAllEvents() {
	List&lt;EventDto&gt; eventDtos = new ArrayList&lt;&gt;();
	for (Event event : service.getAllEvents()) {
		eventDtos.add(convertToDto(event));
	}
	return eventDtos;
}

@PostMapping(value = { "/register", "/register/" })
public RegistrationDto registerPersonForEvent(@RequestParam(name = "person") PersonDto pDto,
	@RequestParam(name = "event") EventDto eDto) throws IllegalArgumentException {
	Person p = service.getPerson(pDto.getName());
	Event e = service.getEvent(eDto.getName());

	Registration r = service.register(p, e);
	return convertToDto(r, p, e);
}

@GetMapping(value = { "/registrations/person/{name}", "/registrations/person/{name}/" })
public List&lt;EventDto&gt; getEventsOfPerson(@PathVariable("name") PersonDto pDto) {
	Person p = convertToDomainObject(pDto);
	return createEventDtosForPerson(p);
}

@GetMapping(value = { "/events/{name}", "/events/{name}/" })
public EventDto getEventByName(@PathVariable("name") String name) throws IllegalArgumentException {
	return convertToDto(service.getEvent(name));
}

private EventDto convertToDto(Event e) {
	if (e == null) {
		throw new IllegalArgumentException("There is no such Event!");
	}
	EventDto eventDto = new EventDto(e.getName(),e.getDate(),e.getStartTime(),e.getEndTime());
	return eventDto;
}

private PersonDto convertToDto(Person p) {
	if (p == null) {
		throw new IllegalArgumentException("There is no such Person!");
	}
	PersonDto personDto = new PersonDto(p.getName());
	personDto.setEvents(createEventDtosForPerson(p));
	return personDto;
}

private RegistrationDto convertToDto(Registration r, Person p, Event e) {
	EventDto eDto = convertToDto(e);
	PersonDto pDto = convertToDto(p);
	return new RegistrationDto(pDto, eDto);
}

private Person convertToDomainObject(PersonDto pDto) {
	List&lt;Person&gt; allPersons = service.getAllPersons();
	for (Person person : allPersons) {
		if (person.getName().equals(pDto.getName())) {
			return person;
		}
	}
	return null;
}

private List&lt;EventDto&gt; createEventDtosForPerson(Person p) {
	List&lt;Event&gt; eventsForPerson = service.getEventsAttendedByPerson(p);
	List&lt;EventDto&gt; events = new ArrayList&lt;&gt;();
	for (Event event : eventsForPerson) {
		events.add(convertToDto(event));
	}
	return events;
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="truetrying-smoke-testing-of-the-application"><a class="anchor" href="#truetrying-smoke-testing-of-the-application"></a>Trying (Smoke Testing of) the Application</h5>
<div class="paragraph">
<p>We can see if our application is able to respond to HTTP requests using, e.g., the Postman (Chrome), RESTClient browser plugin (Firefox), Advanced Rest Client (Firefox), or the command line tool called <code>curl</code>.</p>
</div>
<div class="paragraph">
<p>Once you launch the client, you can specify the path and select the method as shown in the below figures.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/RestClient1.png" alt="Post method on REST Client" width="1000"></span></p>
</div>
<div class="paragraph">
<p>Once we use POST, the record is persisted and then we can use the GET method to retrive the same.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/RestClient2.png" alt="GET method on REST Client" width="1000"></span></p>
</div>
<div class="paragraph">
<p>Similary, we can try other methods as well.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truespring-data-an-alternative-way-to-expose-application-data-via-a-restful-interface"><a class="anchor" href="#truespring-data-an-alternative-way-to-expose-application-data-via-a-restful-interface"></a>2.5.3. Spring Data - an Alternative Way to Expose Application Data via a RESTful Interface</h4>
<div class="paragraph">
<p>The advantage of using <em>Spring Data Rest</em> is that it can remove a lot of boilerplate compared to the previous sections. Spring would automatically create endpoints for classes, such as <code>/events</code> and <code>/person</code> in the Event Registration example. In this case, implementing proper error handling may require some extra effort (not discussed here).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section presents an alternative way of exposing your data via a REST API. <strong>You do not have to use this method</strong> if you do not think that it fits your design.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the dependency 'spring-boot-starter-data-rest' in <em>build.gradle</em> file of your backend. It is required to expose Spring Data repositories over REST using Spring Data REST. Update your <code>dependencies</code> section as shown below:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-data-rest'

	runtimeOnly 'org.postgresql:postgresql'
	testImplementation('org.springframework.boot:spring-boot-starter-test') {
		exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>We have already added the dependency <code>spring-boot-starter-data-rest</code> exposes DAOs over RESTful endpoints using Spring Data REST.</p>
</li>
<li>
<p>Next, we can go to repository interfaces and add a <code>@RepositoryRestResource</code> annotaion.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// REST endpoint specification
@RepositoryRestResource(collectionResourceRel = "person_data", path = "person_data")
public interface PersonRepository extends CrudRepository&lt;Person, String&gt;{

	Person findPersonByName(String name);

}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, we can access this REST API (<code><a href="http://localhost:8080/person_data" class="bare">http://localhost:8080/person_data</a></code>) in the browser or REST Client and will receive the JSON as shown below.</p>
<div class="paragraph">
<p><span class="image"><img src="figs/RestClient3.png" alt="Post method on REST Client" width="1000"></span></p>
</div>
</li>
<li>
<p>Exercise: turn on this <em>Spring Data JPA</em> feature for events and registrations, too.</p>
</li>
<li>
<p>Question: what information do we see in the response?</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueunit-testing-service-methods-in-backend"><a class="anchor" href="#trueunit-testing-service-methods-in-backend"></a>2.6. Unit Testing Service Methods in Backend</h3>
<div class="sect3">
<h4 id="trueservice-unit-testing-setup-with-mockito"><a class="anchor" href="#trueservice-unit-testing-setup-with-mockito"></a>2.6.1. Service Unit Testing Setup with Mockito</h4>
<div class="paragraph">
<p>We need extra dependencies to support testing of the business methods in isolation.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following dependencies to the project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">testImplementation 'org.mockito:mockito-core:2.+'
testImplementation 'org.mockito:mockito-junit-jupiter:2.18.3'

testRuntime 'org.junit.jupiter:junit-jupiter-engine:5.3.1'</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Finding configuration settings for your Gradle/Maven projects is very simple by searaching for them on MVNRepository: <a href="https://mvnrepository.com/" class="bare">https://mvnrepository.com/</a>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If you also would like to run your project from Eclipse, add an additional dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">testImplementation 'org.junit.platform:junit-platform-launcher:1.4.1'</code></pre>
</div>
</div>
</li>
<li>
<p>Create a test class (in case you don&#8217;t already have one) <code>TestEventRegistrationService</code> in the corresponding package under <code>src/test/java</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.eventregistration.service;

import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.junit.jupiter.MockitoExtension;


@ExtendWith(MockitoExtension.class)
public class TestEventRegistrationService {

}</code></pre>
</div>
</div>
</li>
<li>
<p>Build your project to ensure its dependencies are correctly loaded.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueimplementing-unit-tests-for-service-class"><a class="anchor" href="#trueimplementing-unit-tests-for-service-class"></a>2.6.2. Implementing Unit Tests for Service Class</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following static imports for methods:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNull;
import static org.junit.jupiter.api.Assertions.fail;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyString;
import static org.mockito.Mockito.lenient;
import static org.mockito.Mockito.when;</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following imports to the test class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.sql.Date;
import java.sql.Time;
import java.time.LocalTime;
import java.time.format.DateTimeFormatter;
import java.util.Calendar;

import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.mockito.stubbing.Answer;

import ca.mcgill.ecse321.eventregistration.dao.EventRepository;
import ca.mcgill.ecse321.eventregistration.dao.PersonRepository;
import ca.mcgill.ecse321.eventregistration.dao.RegistrationRepository;
import ca.mcgill.ecse321.eventregistration.model.Event;
import ca.mcgill.ecse321.eventregistration.model.Person;
import ca.mcgill.ecse321.eventregistration.model.Registration;</code></pre>
</div>
</div>
</li>
<li>
<p>Create the DAO mock for person</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Mock
private PersonRepository personDao;

@InjectMocks
private EventRegistrationService service;

private static final String PERSON_KEY = "TestPerson";

@BeforeEach
public void setMockOutput() {
    lenient().when(personDao.findPersonByName(anyString())).thenAnswer( (InvocationOnMock invocation) -&gt; {
        if(invocation.getArgument(0).equals(PERSON_KEY)) {
            Person person = new Person();
            person.setName(PERSON_KEY);
            return person;
        } else {
            return null;
        }
    });
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add test cases from the <a href="https://gist.githubusercontent.com/imbur/d8836dc9f44ece65186a43ac80a259fd/raw/ff59449ad4dfadfc2c54bb317649300f6ae2409c/TestEventRegistrationService.java">complete test suite that is available from here</a>.</p>
</li>
<li>
<p>Run the tests as JUnit/Gradle tests and interpret the test error messages! You should see only a few (at least one) tests passing.</p>
</li>
<li>
<p>Update the implementation (i.e., replace the current service method codes with the ones provided below) of the following methods with input validation in the <code>EventRegistrationService</code> service class to make the tests pass (we are rapid simulating a TDD process&#8201;&#8212;&#8201;TDD stands for <em>Test-Driven Development</em>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public Person createPerson(String name) {
	if (name == null || name.trim().length() == 0) {
		throw new IllegalArgumentException("Person name cannot be empty!");
	}
	Person person = new Person();
	person.setName(name);
	personRepository.save(person);
	return person;
}

@Transactional
public Person getPerson(String name) {
    if (name == null || name.trim().length() == 0) {
        throw new IllegalArgumentException("Person name cannot be empty!");
    }
    Person person = personRepository.findPersonByName(name);
    return person;
}

@Transactional
public Event getEvent(String name) {
    if (name == null || name.trim().length() == 0) {
        throw new IllegalArgumentException("Event name cannot be empty!");
    }
    Event event = eventRepository.findEventByName(name);
    return event;
}

@Transactional
public Event createEvent(String name, Date date, Time startTime, Time endTime) {
    // Input validation
    String error = "";
    if (name == null || name.trim().length() == 0) {
        error = error + "Event name cannot be empty! ";
    }
    if (date == null) {
        error = error + "Event date cannot be empty! ";
    }
    if (startTime == null) {
        error = error + "Event start time cannot be empty! ";
    }
    if (endTime == null) {
        error = error + "Event end time cannot be empty! ";
    }
    if (endTime != null &amp;&amp; startTime != null &amp;&amp; endTime.before(startTime)) {
        error = error + "Event end time cannot be before event start time!";
    }
    error = error.trim();
    if (error.length() &gt; 0) {
        throw new IllegalArgumentException(error);
    }

    Event event = new Event();
    event.setName(name);
    event.setDate(date);
    event.setStartTime(startTime);
    event.setEndTime(endTime);
    eventRepository.save(event);
    return event;
}

@Transactional
public Registration register(Person person, Event event) {
    String error = "";
    if (person == null) {
        error = error + "Person needs to be selected for registration! ";
    } else if (!personRepository.existsById(person.getName())) {
        error = error + "Person does not exist! ";
    }
    if (event == null) {
        error = error + "Event needs to be selected for registration!";
    } else if (!eventRepository.existsById(event.getName())) {
        error = error + "Event does not exist!";
    }
    if (registrationRepository.existsByPersonAndEvent(person, event)) {
        error = error + "Person is already registered to this event!";
    }
    error = error.trim();

    if (error.length() &gt; 0) {
        throw new IllegalArgumentException(error);
    }

    Registration registration = new Registration();
	registration.setId(person.getName().hashCode() * event.getName().hashCode());
    registration.setPerson(person);
    registration.setEvent(event);

    registrationRepository.save(registration);

    return registration;
}

@Transactional
public List&lt;Event&gt; getEventsAttendedByPerson(Person person) {
    if (person == null ) {
        throw new IllegalArgumentException("Person cannot be null!");
    }
    List&lt;Event&gt; eventsAttendedByPerson = new ArrayList&lt;&gt;();
    for (Registration r : registrationRepository.findByPerson(person)) {
        eventsAttendedByPerson.add(r.getEvent());
    }
    return eventsAttendedByPerson;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the tests again, and all should be passing this time.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueservice-integration-testing-with-the-curl-tool"><a class="anchor" href="#trueservice-integration-testing-with-the-curl-tool"></a>2.6.3. Service Integration Testing with the curl Tool</h4>
<div class="paragraph">
<p>The command line utility <a href="https://curl.haxx.se/"><code>curl</code></a> is one way to automate integration testing for the REST API of your application. This brief section shows a basic examples for using it for testing with persons.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure you have a clean database for your integration tests. This can be done by using the <code>spring.jpa.hibernate.ddl-auto=create-drop</code> setting in the <em>application.properties</em> file for the test backend, or by exposing a database clear API function that is only used durint integration testing.</p>
</li>
<li>
<p>Start the backend server.</p>
</li>
<li>
<p>Issue <code>curl -s <a href="http://localhost:8080/persons" class="bare">http://localhost:8080/persons</a></code> and observe the output!</p>
</li>
<li>
<p>Use the <code>-X</code> switch to specify the used HTTP method:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ curl -s -X POST http://localhost:8080/persons/testperson1
{"name":"testperson1","events":[]}
$ curl -s -X POST http://localhost:8080/persons/testperson2
{"name":"testperson2","events":[]}
$ curl -s -X http://localhost:8080/persons
[{"name":"testperson1","events":[]},{"name":"testperson2","events":[]}]</code></pre>
</div>
</div>
</li>
<li>
<p>To verify that a given content is in the returned values, you can use the standard output result of the command and filter it, for example, using <code>grep</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ curl -s -X GET  http://localhost:8080/persons | grep -o testperson1
testperson1</code></pre>
</div>
</div>
</li>
<li>
<p>A way to get started with implementing a Gradle task for integration testing (expected in the second deliverable) is to call a command line tool (e.g., <code>curl</code>) from Gradle. Gradle documentation has a section on how to achieve this: <a href="https://docs.gradle.org/5.6.2/dsl/org.gradle.api.tasks.Exec.html#org.gradle.api.tasks.Exec" class="bare">https://docs.gradle.org/5.6.2/dsl/org.gradle.api.tasks.Exec.html#org.gradle.api.tasks.Exec</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueassessing-code-coverage-using-eclemma"><a class="anchor" href="#trueassessing-code-coverage-using-eclemma"></a>2.7. Assessing Code Coverage using EclEmma</h3>
<div class="paragraph">
<p>This tutorial covers the basics of EclEmma and retrieves code coverage metrics using it.</p>
</div>
<div class="sect3">
<h4 id="truegetting-eclemma"><a class="anchor" href="#truegetting-eclemma"></a>2.7.1. Getting EclEmma</h4>
<div class="paragraph">
<p>Install EclEmma as a plugin in your Eclipse IDE from <a href="https://www.eclemma.org/installation.html">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Tools Suite (STS) version of Eclipse already ships with the plugin pre-installed, so you can skip this step if you are using STS.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="trueexample-gradle-project-for-assessing-code-coverage"><a class="anchor" href="#trueexample-gradle-project-for-assessing-code-coverage"></a>2.7.2. Example Gradle Project for Assessing Code Coverage</h4>
<div class="paragraph">
<p>We will create a Gradle project from scratch and be testing a simple method <em>returnAverage(int[], int, int, int)</em> .</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Gradle project in Eclipse by clicking on <em>File</em> &gt; <em>New</em> &gt; <em>Other</em><br>
<span class="image"><img src="figs/coverage-1.png" alt="New Project"></span></p>
</li>
<li>
<p>Under <em>Gradle</em>, choose Gradle Project<br>
<span class="image"><img src="figs/coverage-2.png" alt="New Gradle Project"></span></p>
</li>
<li>
<p>Click on <em>Next</em>, then name your project <em>tutorial7</em>, click on <em>Finish</em><br>
<span class="image"><img src="figs/coverage-3.png" alt="Project Name"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The project may take some time to be created.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a new package instead of the default ones for both the source and test folders (e.g <code>ca.mcgill.ecse321.tutorial7</code>) and move the default generated classes (<code>Library</code> and <code>LibraryTest</code>) to this package.<br>
<span class="image"><img src="figs/coverage-4.png" alt="Create Packages"></span></p>
</li>
<li>
<p>Change the code in the <code>Library</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.tutorial7;

public class Library {

	public static double returnAverage(int value[], int arraySize, int MIN, int MAX) {
		int index, ti, tv, sum;
		double average;
		index = 0;
		ti = 0;
		tv = 0;
		sum = 0;
		while (ti &lt; arraySize &amp;&amp; value[index] != -999) {
			ti++;
			if (value[index] &gt;= MIN &amp;&amp; value[index] &lt;= MAX) {
				tv++;
				sum += value[index];
			}
			index++;
		}
		if (tv &gt; 0)
			average = (double) sum / tv;
		else
			average = (double) -999;
		return average;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Change the code in the <code>LibraryTest</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package ca.mcgill.ecse321.tutorial7;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class LibraryTest {

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest1() {
		int[] value = {5, 25, 15, -999};
		int AS = 4;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(15, average, 0.1);
	}

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest2() {
		int[] value = {};
		int AS = 0;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(-999.0, average, 0.1);
	}
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="trueretrieving-code-coverage-metrics"><a class="anchor" href="#trueretrieving-code-coverage-metrics"></a>2.7.3. Retrieving Code Coverage Metrics</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We can straightforwardly manage code coverage using JaCoCo inside Eclipse with no configuration if we are using EclEmma Eclipse plugin.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the Test in coverage mode using Eclemma. Click on <em>LibraryTest</em>, <em>Coverage As</em>, <em>1 JUnit Test</em><br>
<span class="image"><img src="figs/coverage-5.png" alt="Full Branch Coverage"></span></p>
</li>
<li>
<p>Verify that we have 100% branch coverage.<br>
<span class="image"><img src="figs/coverage-6.png" alt="Full Branch Coverage-Eclemma"></span></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueevent-registration-application-unit-code-coverage"><a class="anchor" href="#trueevent-registration-application-unit-code-coverage"></a>2.8. Event Registration Application Unit Code Coverage</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the code coverage of the service unit tests in the EventRegistration-Backend project.</p>
</li>
<li>
<p>If you want to run the tests using gradle, use the <em>Jacoco plugin</em> with plugin ID <code>jacoco</code>. After adding it to the <em>build.gradle</em> file, the plugin section should look like the one below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">plugins {
	id 'org.springframework.boot' version '2.2.4.RELEASE'
	id 'io.spring.dependency-management' version '1.0.9.RELEASE'
	id 'java'
	id 'jacoco'
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>This new plugin gives us the <code>jacocoTestReport</code> task that can generate html reports. Try executing this task from the terminal and see the generated HTML files under <em>build/reports/jacoco/test/html/</em>!</p>
</li>
<li>
<p>If you wish, you can check enforce a certain treshold on the test cases with this Jacoco plugin. With the definition below, the <code>./gradlew jacocoTestCoverageVerification</code> task will fail if code coverage is below 60%.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="gradle" class="language-gradle hljs">jacocoTestCoverageVerification {
	violationRules {
		rule {
			limit {
				minimum = 0.6
			}
		}
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-02-09 13:10:35 -0500
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>